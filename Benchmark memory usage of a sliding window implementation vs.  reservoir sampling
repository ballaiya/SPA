import random 
from collections import deque 
import sys 
import tracemalloc 
# Step 1: Simulate a stream of 10000 integers 
stream = [random.randint(1, 10000) for _ in range(10000)] 
window_size = 1000 
# Step 2: Sliding window memory usage 
tracemalloc.start() 
sliding_window = deque(maxlen=window_size) 
for item in stream: 
    sliding_window.append(item) 
sliding_mem = tracemalloc.get_traced_memory()[1] 
tracemalloc.stop() 
# Step 3: Reservoir sampling memory usage 
tracemalloc.start() 
reservoir = [] 
for i, item in enumerate(stream): 
    if i < window_size: 
        reservoir.append(item) 
    else: 
        j = random.randint(0, i) 
        if j < window_size: 
            reservoir[j] = item 
reservoir_mem = tracemalloc.get_traced_memory()[1] 
tracemalloc.stop() 
# Step 4: Output comparison 
print("    Memory Usage Comparison:") 
print(f"Sliding Window:     {sliding_mem / 1024:.2f} KB") 
print(f"Reservoir Sampling: {reservoir_mem / 1024:.2f} KB") 
